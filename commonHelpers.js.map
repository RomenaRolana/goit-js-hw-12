{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Імпорт необхідних бібліотек\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Отримання елементів DOM\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more');\n\n// Параметри пошуку\nlet searchParams = {\n    page: 1,\n    per_page: 15,\n    q: '',\n};\n\n// Ініціалізація SimpleLightbox\nlet lightBox = new SimpleLightbox('.gallery a');\n\n// Функція для оновлення UI\nconst updateUI = (isLoading) => {\n    loader.style.display = isLoading ? 'block' : 'none';\n    loadMoreBtn.style.display = !isLoading ? 'block' : 'none';\n};\n\n// Асинхронна функція для отримання фотографій за назвою\nconst getPhotoByName = async () => {\n    const API_KEY = '42183789-4564ae77348bbdba9cab87cc0';\n    const BASE_URL = 'https://pixabay.com/api/';\n    try {\n        const response = await axios.get(`${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&safesearch=true`, { params: searchParams });\n        return response.data;\n    } catch (error) {\n        iziToast.error({\n            title: 'Помилка',\n            message: `Сталася помилка: ${error.message}`,\n        });\n        updateUI(false); // Переконуємося, що завантажувач приховується при помилці\n        throw error; // Повторно кидаємо помилку, якщо потрібно\n    }\n};\n\n// Функція для створення галереї\nconst createGallery = (images) => {\n    if (images.hits.length === 0) {\n        iziToast.info({\n            message: 'На жаль, за вашим запитом зображення не знайдені. Спробуйте змінити запит!',\n        });\n    } else {\n        const links = images.hits.map(image => `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\">\n            </a>\n        `).join('');\n        gallery.insertAdjacentHTML('beforeend', links);\n        lightBox.refresh();\n    }\n    updateUI(false);\n};\n\n// Обробка події 'submit' для форми\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    searchParams.q = document.querySelector('#query').value.trim();\n    searchParams.page = 1;\n    gallery.innerHTML = '';\n    updateUI(true);\n    try {\n        const images = await getPhotoByName();\n        createGallery(images);\n        loadMoreBtn.style.display = images.hits.length < searchParams.per_page ? 'none' : 'block';\n    } catch (error) {\n        // Обробка помилок здійснена в getPhotoByName\n    }\n});\n\n// Обробка події кліку на кнопку 'Завантажити більше'\nloadMoreBtn.addEventListener('click', async () => {\n    searchParams.page += 1;\n    updateUI(true);\n    try {\n        const images = await getPhotoByName();\n        createGallery(images);\n        if (images.hits.length < searchParams.per_page || (gallery.querySelectorAll('.gallery-item').length >= images.totalHits)) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({\n                message: \"Ви досягли кінця списку результатів.\",\n            });\n        }\n    } catch (error) {\n        // Обробка помилок здійснена в getPhotoByName\n    }\n});\n\n// Початкове приховування кнопки 'Завантажити більше' та завантажувача\nloadMoreBtn.style.display = 'none';\nloader.style.display = 'none'; // Переконуємося, що завантажувач спочатку прихований"],"names":["form","gallery","loader","loadMoreBtn","searchParams","lightBox","SimpleLightbox","updateUI","isLoading","getPhotoByName","API_KEY","BASE_URL","axios","error","iziToast","createGallery","images","links","image"],"mappings":"+vBAQA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAGvD,IAAIC,EAAe,CACf,KAAM,EACN,SAAU,GACV,EAAG,EACP,EAGIC,EAAW,IAAIC,EAAe,YAAY,EAG9C,MAAMC,EAAYC,GAAc,CAC5BN,EAAO,MAAM,QAAUM,EAAY,QAAU,OAC7CL,EAAY,MAAM,QAAWK,EAAsB,OAAV,OAC7C,EAGMC,EAAiB,SAAY,CAC/B,MAAMC,EAAU,qCACVC,EAAW,2BACjB,GAAI,CAEA,OADiB,MAAMC,EAAM,IAAI,GAAGD,CAAQ,QAAQD,CAAO,2DAA4D,CAAE,OAAQN,CAAc,CAAA,GAC/H,IACnB,OAAQS,EAAO,CACZ,MAAAC,EAAS,MAAM,CACX,MAAO,UACP,QAAS,oBAAoBD,EAAM,OAAO,EACtD,CAAS,EACDN,EAAS,EAAK,EACRM,CACT,CACL,EAGME,EAAiBC,GAAW,CAC9B,GAAIA,EAAO,KAAK,SAAW,EACvBF,EAAS,KAAK,CACV,QAAS,4EACrB,CAAS,MACE,CACH,MAAMG,EAAQD,EAAO,KAAK,IAAIE,GAAS;AAAA,uBACxBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,SAEzD,EAAE,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,YAAagB,CAAK,EAC7CZ,EAAS,QAAO,CACnB,CACDE,EAAS,EAAK,CAClB,EAGAP,EAAK,iBAAiB,SAAU,MAAO,GAAM,CACzC,EAAE,eAAc,EAChBI,EAAa,EAAI,SAAS,cAAc,QAAQ,EAAE,MAAM,OACxDA,EAAa,KAAO,EACpBH,EAAQ,UAAY,GACpBM,EAAS,EAAI,EACb,GAAI,CACA,MAAMS,EAAS,MAAMP,IACrBM,EAAcC,CAAM,EACpBb,EAAY,MAAM,QAAUa,EAAO,KAAK,OAASZ,EAAa,SAAW,OAAS,OACrF,MAAe,CAEf,CACL,CAAC,EAGDD,EAAY,iBAAiB,QAAS,SAAY,CAC9CC,EAAa,MAAQ,EACrBG,EAAS,EAAI,EACb,GAAI,CACA,MAAMS,EAAS,MAAMP,IACrBM,EAAcC,CAAM,GAChBA,EAAO,KAAK,OAASZ,EAAa,UAAaH,EAAQ,iBAAiB,eAAe,EAAE,QAAUe,EAAO,aAC1Gb,EAAY,MAAM,QAAU,OAC5BW,EAAS,KAAK,CACV,QAAS,sCACzB,CAAa,EAER,MAAe,CAEf,CACL,CAAC,EAGDX,EAAY,MAAM,QAAU,OAC5BD,EAAO,MAAM,QAAU"}