{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet searchParams = {\n    page: 1,\n    per_page: 15,\n    q: '',\n};\n\nlet lightBox = new SimpleLightbox('.gallery a');\n\nconst updateUI = (show) => {\n    loader.style.display = show ? 'block' : 'none';\n    loadMoreBtn.style.display = show ? 'none' : 'block';\n};\n\nconst getPhotoByName = async () => {\n    const API_KEY = '42183789-4564ae77348bbdba9cab87cc0';\n    const BASE_URL = 'https://pixabay.com/api/';\n    try {\n        const response = await axios.get(`${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&safesearch=true`, { params: searchParams });\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n};\n\nconst createGallery = (images) => {\n    if (images.hits.length === 0) {\n        iziToast.info({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        updateUI(false);\n    } else {\n        const links = images.hits.map(image => `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\">\n            </a>\n        `).join('');\n        gallery.insertAdjacentHTML('beforeend', links);\n        lightBox.refresh();\n        updateUI(false);\n    }\n};\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    searchParams.q = document.querySelector('#query').value;\n    searchParams.page = 1;\n    gallery.innerHTML = '';\n    updateUI(true);\n    try {\n        const images = await getPhotoByName();\n        createGallery(images);\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: `An error occurred: ${error.message}`,\n        });\n    }\n    loadMoreBtn.style.display = 'block';\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    searchParams.page += 1;\n    updateUI(true);\n    try {\n        const images = await getPhotoByName();\n        createGallery(images);\n        if (images.hits.length < 15 || (gallery.querySelectorAll('.gallery-item').length >= images.totalHits)) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: `An error occurred: ${error.message}`,\n        });\n    }\n});\n\n// Початкове приховування кнопки завантаження\nloadMoreBtn.style.display = 'none';"],"names":["form","gallery","loader","loadMoreBtn","searchParams","lightBox","SimpleLightbox","updateUI","show","getPhotoByName","API_KEY","BASE_URL","axios","error","createGallery","images","iziToast","links","image"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAe,CACf,KAAM,EACN,SAAU,GACV,EAAG,EACP,EAEIC,EAAW,IAAIC,EAAe,YAAY,EAE9C,MAAMC,EAAYC,GAAS,CACvBN,EAAO,MAAM,QAAUM,EAAO,QAAU,OACxCL,EAAY,MAAM,QAAUK,EAAO,OAAS,OAChD,EAEMC,EAAiB,SAAY,CAC/B,MAAMC,EAAU,qCACVC,EAAW,2BACjB,GAAI,CAEA,OADiB,MAAMC,EAAM,IAAI,GAAGD,CAAQ,QAAQD,CAAO,2DAA4D,CAAE,OAAQN,CAAc,CAAA,GAC/H,IACnB,OAAQS,EAAO,CACZ,MAAMA,CACT,CACL,EAEMC,EAAiBC,GAAW,CAC9B,GAAIA,EAAO,KAAK,SAAW,EACvBC,EAAS,KAAK,CACV,QAAS,0EACrB,CAAS,EACDT,EAAS,EAAK,MACX,CACH,MAAMU,EAAQF,EAAO,KAAK,IAAIG,GAAS;AAAA,uBACxBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,SAEzD,EAAE,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,YAAagB,CAAK,EAC7CZ,EAAS,QAAO,EAChBE,EAAS,EAAK,CACjB,CACL,EAEAP,EAAK,iBAAiB,SAAU,MAAO,GAAM,CACzC,EAAE,eAAc,EAChBI,EAAa,EAAI,SAAS,cAAc,QAAQ,EAAE,MAClDA,EAAa,KAAO,EACpBH,EAAQ,UAAY,GACpBM,EAAS,EAAI,EACb,GAAI,CACA,MAAMQ,EAAS,MAAMN,IACrBK,EAAcC,CAAM,CACvB,OAAQF,EAAO,CACZG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,sBAAsBH,EAAM,OAAO,EACxD,CAAS,CACJ,CACDV,EAAY,MAAM,QAAU,OAChC,CAAC,EAEDA,EAAY,iBAAiB,QAAS,SAAY,CAC9CC,EAAa,MAAQ,EACrBG,EAAS,EAAI,EACb,GAAI,CACA,MAAMQ,EAAS,MAAMN,IACrBK,EAAcC,CAAM,GAChBA,EAAO,KAAK,OAAS,IAAOd,EAAQ,iBAAiB,eAAe,EAAE,QAAUc,EAAO,aACvFZ,EAAY,MAAM,QAAU,OAC5Ba,EAAS,KAAK,CACV,QAAS,4DACzB,CAAa,EAER,OAAQH,EAAO,CACZG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,sBAAsBH,EAAM,OAAO,EACxD,CAAS,CACJ,CACL,CAAC,EAGDV,EAAY,MAAM,QAAU"}